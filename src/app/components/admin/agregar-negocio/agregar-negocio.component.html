<div class="d-none">
  <qrcode [qrdata]="qrCodeData" [width]="400" [errorCorrectionLevel]="'M'"></qrcode>
</div>

<!-- <button class="btn btn-primary" (click)="saveAsImage()">Download QR Code Image</button> -->


<div class="">

  <div class="buttonClose">
    <button mat-icon-button (click)="cancelar()">
      <!-- <mat-icon>close</mat-icon> -->
      <i-tabler name="x"></i-tabler>
    </button>
  </div>


    <p class="h3">Crear Negocio</p>
    <form [formGroup]="formNegocio" (submit)="onSubmit()" novalidate class="row gx-3 gx-md-4">

      <mat-form-field appearance="standard" class="col-12">
        <mat-label>Imagen logo</mat-label>
        <ngx-mat-file-input #removableInput formControlName="image" placeholder="Seleccionar imagen" accept=".jpg, .jpeg, .png" (change)="detectFiles($event)"></ngx-mat-file-input>
        <button mat-icon-button matSuffix *ngIf="!removableInput.empty" (click)="removableInput.clear($event)">
          <mat-icon>clear</mat-icon>
        </button>
        <mat-icon matSuffix *ngIf="removableInput.empty">image_search</mat-icon>
        <mat-error *ngIf="errorImagen()">{{errorImagen()}}</mat-error>
        <mat-hint>Peso máximo: 5 MB</mat-hint>
      </mat-form-field>

      <mat-form-field appearance="standard" class="col-12">
        <mat-label>Nombre del negocio</mat-label>
        <input matInput type="text" formControlName="nombre">
      </mat-form-field>

      <mat-form-field appearance="standard" class="col-12">
        <mat-label>Dirección</mat-label>
        <input matInput type="text" formControlName="direccion">
      </mat-form-field>

      <!-- <mat-form-field appearance="standard" class="col-12">
        <mat-label>Sector (opcional)</mat-label>
        <mat-select formControlName="tipo">
          <mat-option *ngFor="let tipo of tiposNegocio" [value]="tipo">{{tipo}}</mat-option>
        </mat-select>
      </mat-form-field> -->

      <mat-form-field appearance="standard" class="col-12">
        <mat-label>Rubro (opcional)</mat-label>
        <input type="text" placeholder="Pick one" matInput formControlName="tipo" [matAutocomplete]="auto">
        <mat-autocomplete #auto="matAutocomplete">
          <mat-option *ngFor="let option of filteredOptions | async" [value]="option">{{option}}</mat-option>
        </mat-autocomplete>
      </mat-form-field>

      <!-- <mat-form-field appearance="standard" class="col-6">
        <mat-label>Color</mat-label>
        <input matInput type="text" formControlName="color">
        <button type="button" mat-icon-button matSuffix (click)="openModalCrearColor()">
          <mat-icon class="material-icons-outlined">format_color_fill</mat-icon>
        </button>
      </mat-form-field> -->

      <div class="col-6">
        <div class="d-flex align-items-center">
          <div class="rounded-1 w-100 h-100 shadow border border-4 border-white text-white p-2 text-center" [style.background-color]="color">
            <span>Color</span>
          </div>
          <button class="ms-1" type="button" mat-icon-button (click)="openModalCrearColor()">
            <i-tabler name="palette" class="iconTabler"></i-tabler>
          </button>
        </div>
      </div>

      


      <!-- <p class="lead mt-3" *ngIf="formNegocio.controls['redes']['controls'].length >= 1">Redes sociales</p>

      <div formArrayName="redes" class="col-12">
        <div *ngFor="let precio of formNegocio.controls['redes']['controls']; let i = index;">
          <div [formGroupName]="i" class="d-flex">
            <div class="row gx-3 w-100">
              <mat-form-field appearance="standard" class="col-5">
                <mat-label>Red social</mat-label>
                <mat-select formControlName="nombre">
                  <mat-option *ngFor="let red of redesSociales" [value]="red.nombre">{{red.nombre}}</mat-option>
                </mat-select>
              </mat-form-field>
              <mat-form-field appearance="standard" class="col-7">
                <mat-label>Link</mat-label>
                <input matInput type="text" formControlName="url">
              </mat-form-field>
            </div>
            <div class="pt-1">
              <button class="ms-2" matSuffix mat-icon-button (click)="eliminarRed(i)">
                <i-tabler name="trash"></i-tabler>
              </button>
            </div>
          </div>
        </div>
      </div>

      <div class="col-12 mb-3 mb-md-5">
        <button type="button" class="btn btn-link btn-sm px-0" (click)="agregarRed()">
          <i-tabler name="plus" class="me-1" style="width: 18px; height: 18px;"></i-tabler>
          Agregar red social
        </button>
      </div> -->


      <div class="d-grid mt-2">
        <button class="btn btn-primary">
          <span class="d-flex justify-content-center myColorSpinnerWhite" *ngIf="loading">
            <mat-spinner class="" [diameter]="24"></mat-spinner>
          </span>
          <span *ngIf="!loading">Crear Negocio</span>
        </button>
      </div>

    </form>

    <!-- <pre>{{formNegocio.value | json}}</pre> -->

</div>